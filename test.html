<html>
  <head>
    <title>Login Test Page</title>
    <script>
      function signup(event) {
        event.preventDefault();
        const email = document.getElementById("signup-email").value;
        const password = document.getElementById("signup-password").value;
        fetch("/api/v1/signup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        })
        .then(res => res.json())
        .then(json => {
          document.getElementById("signup-result").textContent = JSON.stringify(json, null, 2);
        })
        .catch(err => {
          document.getElementById("signup-result").textContent = err;
        });
      }

      function login(event) {
        event.preventDefault();
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;
        fetch("/api/v1/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        })
        .then(res => res.json())
        .then(json => {
          document.getElementById("login-result").textContent = JSON.stringify(json, null, 2);
        })
        .catch(err => {
          document.getElementById("login-result").textContent = err;
        });
      }

      function googleLogin() {
        window.location.href = "/auth/google/login";
      }
    </script>
  </head>
  <body>
    <h1>Post Application Tester</h1>

    <h2>Signup</h2>
    <form onsubmit="signup(event)">
      <input id="signup-email" type="email" placeholder="Email" required />
      <input id="signup-password" type="password" placeholder="Password" required />
      <button type="submit">Sign Up</button>
    </form>
    <pre id="signup-result"></pre>

    <h2>Login</h2>
    <form onsubmit="login(event)">
      <input id="login-email" type="email" placeholder="Email" required />
      <input id="login-password" type="password" placeholder="Password" required />
      <button type="submit">Login</button>
    </form>
    <pre id="login-result"></pre>

    <h2>Or</h2>
    <button onclick="googleLogin()">Login with Google</button>

    <h2>WebSocket & Posts Test</h2>
    <!-- Existing JS/WebSocket code remains here -->
    <script>
      var ws = new WebSocket("ws://localhost:5050/ws");

      ws.onopen = function() {
        console.log("Connected to server");
      };

      ws.onmessage = function(event) {
        console.log("Received message: " + event.data);
      };

      ws.onerror = function(event) {
        console.log("Error: " + event.data);
      };

      fetch("/api/v1/posts", {
        method: "GET",
        headers: {
          "Content-Type": "application/json"
        }
      }).then(function(response) {
        return response.json();
      }).then(function(json) {
        console.log('DATA RESPONSE')
        console.log(json);
      });
    </script>
  </body>
</html>